---
// pages/documentation.astro

import { Code } from 'astro:components';
import Layout from '@layouts/BaseLayout.astro';
import '@styles/components/_code-block.css';
import '@styles/components/_table.css';

const meta = {
  title: 'Documentation — PandaMotion ',
  description: 'API reference for the PandaMotion  animation system',
  imageOG: 'generic-social-1200x630.png',
  altOG: 'Documentation',
};
---

<style>
  .docs {
    padding-block-end: var(--space-xl);
  }
</style>

<Layout metaData={meta}>
  <main class="wrapper flow docs">
    <h1>Documentation</h1>
    <p>
      A lightweight, data-attribute-driven animation system for Astro using CSS
      <code>@keyframes</code>, <code>IntersectionObserver</code>, and CSS Scroll
      Timeline. Add animations declaratively with HTML attributes or Astro
      components &mdash; no external dependencies required.
    </p>

    <!-- ============ Quick Start ============ -->
    <section class="flow">
      <h2>Quick Start</h2>
      <ol>
        <li>
          Install the package:
          <Code code="pnpm install astro-animations" lang="bash" />
          <p style="text-align: center; margin: var(--space-3xs) 0;">or</p>
          <Code code="npm install astro-animations" lang="bash" />
        </li>
        <li>
          Add <code>&lt;AstroAnimations /&gt;</code> to your base layout, just before
          <code>&lt;/body&gt;</code> — it injects all required CSS and the runtime script:
          <Code code={`---
import { AstroAnimations } from 'astro-animations';
---

<html>
  <head>...</head>
  <body>
    <slot />
    <AstroAnimations />
  </body>
</html>`} lang="astro" />
        </li>
        <li>
          Add <code>data-animate</code> to any element — it will animate when scrolled
          into view:
          <Code code={`<h2 data-animate="fade">Hello</h2>

<div data-animate="slide" data-animate-direction="left" data-animate-easing="spring">
    <p>Slides in from the left with spring easing</p>
</div>`} lang="html" />
        </li>
        <li>
          Or use the <code>&lt;Animate&gt;</code> component for a props-based API:
          <Code code={`---
import { Animate } from 'astro-animations';
---

<Animate type="slide" direction="left" easing="spring">
  <p>Slides in from the left with spring easing</p>
</Animate>`} lang="astro" />
        </li>
      </ol>
    </section>

    <!-- ============ Animation Types ============ -->
    <section class="flow">
      <h2>Animation Types</h2>
      <p>
        Seven built-in animation types, set via <code>data-animate</code>.
      </p>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Type</th>
              <th>Description</th>
              <th>Supports Direction</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>fade</code></td>
              <td>Opacity transition</td>
              <td>No</td>
            </tr>
            <tr>
              <td><code>slide</code></td>
              <td>Translates in from an edge</td>
              <td>Yes</td>
            </tr>
            <tr>
              <td><code>bounce</code></td>
              <td>Bouncy entrance with overshoot</td>
              <td>Yes</td>
            </tr>
            <tr>
              <td><code>zoom</code></td>
              <td>Scales up into place</td>
              <td>No</td>
            </tr>
            <tr>
              <td><code>flip</code></td>
              <td>3D rotation on X or Y axis</td>
              <td>Yes</td>
            </tr>
            <tr>
              <td><code>fold</code></td>
              <td>Unfolds from an edge</td>
              <td>Yes</td>
            </tr>
            <tr>
              <td><code>roll</code></td>
              <td>Combined translate + rotate</td>
              <td>No</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============ Data Attributes ============ -->
    <section class="flow">
      <h2>Data Attributes</h2>

      <h3>Scroll-Triggered Animations</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Attribute</th>
              <th>Description</th>
              <th>Values</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>data-animate</code></td>
              <td
                >Animation type to play when the element enters the viewport</td
              >
              <td>
                <code>fade</code>, <code>slide</code>, <code>bounce</code>,
                <code>zoom</code>, <code>flip</code>, <code>fold</code>,
                <code>roll</code>
              </td>
              <td>required</td>
            </tr>
            <tr>
              <td><code>data-animate-direction</code></td>
              <td>Direction the element animates from</td>
              <td>
                <code>up</code>, <code>down</code>, <code>left</code>,
                <code>right</code>
              </td>
              <td><code>up</code></td>
            </tr>
            <tr>
              <td><code>data-animate-duration</code></td>
              <td>How long the animation takes to complete</td>
              <td>milliseconds</td>
              <td><code>700</code></td>
            </tr>
            <tr>
              <td><code>data-animate-delay</code></td>
              <td>Wait time before the animation starts</td>
              <td>milliseconds</td>
              <td><code>0</code></td>
            </tr>
            <tr>
              <td><code>data-animate-easing</code></td>
              <td>Timing curve that controls acceleration</td>
              <td>See <a href="#easing">Easing</a> section</td>
              <td><code>ease-out-3</code></td>
            </tr>
            <tr>
              <td><code>data-animate-intensity</code></td>
              <td
                >How far the element travels &mdash; preset name or numeric
                0&ndash;1</td
              >
              <td>
                <code>subtle</code>, <code>normal</code>, <code>strong</code>,
                <code>0</code>&ndash;<code>1</code>
              </td>
              <td><code>normal</code></td>
            </tr>
            <tr>
              <td><code>data-animate-opacity</code></td>
              <td>Starting opacity before the animation begins</td>
              <td><code>0</code>&ndash;<code>1</code></td>
              <td><code>0</code></td>
            </tr>
            <tr>
              <td><code>data-animate-reverse</code></td>
              <td
                >Reverses the animation so the element starts visible and
                animates <strong>out</strong> when it enters the viewport.
                The animation plays backwards on entry</td
              >
              <td>boolean (presence)</td>
              <td>&mdash;</td>
            </tr>
            <tr>
              <td><code>data-animate-repeat</code></td>
              <td
                >Whether the animation replays each time the element re-enters
                the viewport</td
              >
              <td><code>once</code>, <code>every</code></td>
              <td><code>once</code></td>
            </tr>
            <tr>
              <td><code>data-animate-threshold</code></td>
              <td>
                Fraction of the element that must be visible before the
                animation triggers. <code>0</code> fires as soon as any part appears;
                <code>1</code> waits until the entire element is in view
              </td>
              <td><code>0</code>&ndash;<code>1</code></td>
              <td><code>0.2</code></td>
            </tr>
            <tr>
              <td><code>data-animate-offset</code></td>
              <td
                >Viewport offset — how far from the bottom edge the trigger
                point sits, as a percentage. <code>50</code> triggers when the
                element reaches the vertical centre of the viewport</td
              >
              <td><code>0</code>&ndash;<code>100</code></td>
              <td><code>0</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>Stagger (on parent container)</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Attribute</th>
              <th>Values</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>data-animate-stagger</code></td>
              <td>milliseconds between each child</td>
              <td><code>100</code></td>
            </tr>
            <tr>
              <td><code>data-animate-stagger-from</code></td>
              <td>
                <code>first</code>, <code>last</code>, <code>center</code>
              </td>
              <td><code>first</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>Scroll-Linked Effects</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Attribute</th>
              <th>Values</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>data-scroll-effect</code></td>
              <td>
                <code>parallax</code>, <code>fade</code>, <code>scale</code>,
                <code>rotate</code>, <code>blur</code>, <code>horizontal</code>
              </td>
              <td>required</td>
            </tr>
            <tr>
              <td><code>data-scroll-speed</code></td>
              <td>number (e.g. <code>0.5</code>)</td>
              <td><code>0.5</code></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============ Easing ============ -->
    <section class="flow" id="easing">
      <h2>Easing Functions</h2>
      <p>
        36 easing presets sourced from
        <a href="https://open-props.style">Open Props</a>. Set via
        <code>data-animate-easing</code>.
      </p>

      <div class="grid" data-layout="50-50">
        <div class="flow">
          <h3>Ease (cubic-bezier)</h3>
          <ul>
            <li><code>ease-1</code> &ndash; <code>ease-5</code></li>
            <li><code>ease-in-1</code> &ndash; <code>ease-in-5</code></li>
            <li><code>ease-out-1</code> &ndash; <code>ease-out-5</code></li>
            <li>
              <code>ease-in-out-1</code> &ndash; <code>ease-in-out-5</code>
            </li>
          </ul>
        </div>
        <div class="flow">
          <h3>Spring, Bounce &amp; Elastic</h3>
          <ul>
            <li>
              <code>spring-1</code> &ndash; <code>spring-5</code>
              (linear())
            </li>
            <li>
              <code>bounce-1</code> &ndash; <code>bounce-5</code>
              (linear())
            </li>
            <li>
              <code>elastic-out-1</code> &ndash; <code>elastic-out-5</code>
            </li>
            <li>
              <code>elastic-in-1</code> &ndash; <code>elastic-in-5</code>
            </li>
            <li>
              <code>spring</code> &mdash; alias for <code>spring-3</code>
            </li>
          </ul>
        </div>
      </div>

      <p>
        The <code>spring</code> keyword maps to Open Props' <code
          >--ease-spring-3</code
        >, a <code>linear()</code> approximation of a physics spring. Use
        <code>spring-1</code> (gentle) through <code>spring-5</code> (snappy) for
        fine-grained control.
      </p>
    </section>

    <!-- ============ Intensity ============ -->
    <section class="flow">
      <h2>Intensity Levels</h2>
      <p>
        Controls how far elements travel. Set via
        <code>data-animate-intensity</code>. Accepts a named preset or a numeric
        <code>0</code>&ndash;<code>1</code> value where <code>1.0</code> starts the
        element fully off-screen. Translation values use viewport units (<code
          >vh</code
        >) so animations scale proportionally across screen sizes.
      </p>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Level</th>
              <th>Translate</th>
              <th>Scale</th>
              <th>Rotate</th>
              <th>Numeric</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>subtle</code></td>
              <td>5vh</td>
              <td>0.95</td>
              <td>45deg</td>
              <td>0.05</td>
            </tr>
            <tr>
              <td><code>normal</code></td>
              <td>15vh</td>
              <td>0.85</td>
              <td>90deg</td>
              <td>0.15</td>
            </tr>
            <tr>
              <td><code>strong</code></td>
              <td>30vh</td>
              <td>0.70</td>
              <td>180deg</td>
              <td>0.30</td>
            </tr>
            <tr>
              <td><em>custom</em></td>
              <td>n &times; 100 vh</td>
              <td>1 &minus; n</td>
              <td>n &times; 180deg</td>
              <td>0&ndash;1</td>
            </tr>
          </tbody>
        </table>
      </div>
      <p>
        Named presets (<code>subtle</code>, <code>normal</code>,
        <code>strong</code>) are handled by CSS attribute selectors in the
        injected stylesheet, so they work without JS. Numeric values are
        resolved at runtime by the IntersectionObserver script.
      </p>
    </section>

    <!-- ============ Stagger ============ -->
    <section class="flow">
      <h2>Staggered Animations</h2>
      <p>
        Set <code>data-animate-stagger</code> on a parent. Direct children with
        <code>data-animate</code> will animate sequentially with the specified delay
        between each.
      </p>
      <Code code={`<div data-animate-stagger="150" data-animate-stagger-from="first">
  <div data-animate="slide" data-animate-direction="up">1</div>
  <div data-animate="slide" data-animate-direction="up">2</div>
  <div data-animate="slide" data-animate-direction="up">3</div>
</div>`} lang="html" />
      <p>
        The <code>data-animate-stagger-from</code> attribute controls the ordering:
        <code>first</code> (default) animates top-to-bottom,
        <code>last</code> reverses the order, and <code>center</code> animates outward
        from the middle.
      </p>
    </section>

    <!-- ============ Reverse ============ -->
    <section class="flow">
      <h2>Reverse Animations</h2>
      <p>
        Add <code>data-animate-reverse</code> to make an element start visible
        and animate <strong>out</strong> when it enters the viewport. The
        animation plays backwards on entry, so the element dismisses itself.
      </p>
      <Code code={`<!-- Data attribute -->
<div data-animate="slide" data-animate-direction="up" data-animate-reverse>
  Slides up and fades out on scroll
</div>

<!-- Component -->
<Animate type="fade" reverse>
  Fades out on scroll
</Animate>`} lang="html" />
      <p>
        Works with all 7 animation types. The same <code>duration</code>,
        <code>easing</code>, and <code>intensity</code> settings apply &mdash;
        the animation simply plays backwards.
      </p>
    </section>

    <!-- ============ Components ============ -->
    <section class="flow">
      <h2>Astro Components</h2>

      <h3>&lt;Animate&gt;</h3>
      <p>
        Declarative wrapper that renders <code>data-animate-*</code> attributes from
        props.
      </p>
      <Code code={`---
import { Animate } from 'astro-animations';
---

<Animate type="slide" direction="left" easing="spring" duration={800}>
  <div>Content</div>
</Animate>

<!-- Renders as a custom tag -->
<Animate type="zoom" intensity="strong" as="article" class="card">
  <h3>Title</h3>
</Animate>`} lang="astro" />

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Prop</th>
              <th>Description</th>
              <th>Type</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td>Animation type to play on enter</td>
              <td>AnimationType</td>
              <td>required</td>
            </tr>
            <tr>
              <td><code>as</code></td>
              <td>HTML tag to render</td>
              <td>HTML tag name</td>
              <td><code>div</code></td>
            </tr>
            <tr>
              <td><code>direction</code></td>
              <td>Direction the element animates from</td>
              <td>
                <code>up</code> | <code>down</code> | <code>left</code> |
                <code>right</code>
              </td>
              <td><code>up</code></td>
            </tr>
            <tr>
              <td><code>duration</code></td>
              <td>How long the animation takes</td>
              <td>number (ms)</td>
              <td><code>700</code></td>
            </tr>
            <tr>
              <td><code>delay</code></td>
              <td>Wait time before animating</td>
              <td>number (ms)</td>
              <td><code>0</code></td>
            </tr>
            <tr>
              <td><code>easing</code></td>
              <td>Timing curve for acceleration</td>
              <td>AnimateEasing</td>
              <td><code>ease-out-3</code></td>
            </tr>
            <tr>
              <td><code>intensity</code></td>
              <td>How far the element travels &mdash; preset or 0&ndash;1</td>
              <td>
                <code>subtle</code> | <code>normal</code> |
                <code>strong</code> | <code>0</code>&ndash;<code>1</code>
              </td>
              <td><code>normal</code></td>
            </tr>
            <tr>
              <td><code>opacity</code></td>
              <td>Starting opacity</td>
              <td>number (0&ndash;1)</td>
              <td><code>0</code></td>
            </tr>
            <tr>
              <td><code>reverse</code></td>
              <td>Play the animation in reverse on viewport entry</td>
              <td>boolean</td>
              <td><code>false</code></td>
            </tr>
            <tr>
              <td><code>repeat</code></td>
              <td>Replay on re-enter</td>
              <td><code>once</code> | <code>every</code></td>
              <td><code>once</code></td>
            </tr>
            <tr>
              <td><code>threshold</code></td>
              <td>Fraction of element visible before triggering</td>
              <td>number (0&ndash;1)</td>
              <td><code>0.2</code></td>
            </tr>
            <tr>
              <td><code>offset</code></td>
              <td>Viewport offset from the bottom edge (0&ndash;100%)</td>
              <td>number (0&ndash;100)</td>
              <td><code>0</code></td>
            </tr>
            <tr>
              <td><code>class</code></td>
              <td>CSS class(es) applied to the rendered element</td>
              <td>string</td>
              <td>&mdash;</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>&lt;ScrollEffect&gt;</h3>
      <p>
        Declarative wrapper for CSS scroll-linked effects. In PandaMotion, all
        scroll effects use CSS Scroll Timeline (no JS fallback).
      </p>
      <Code code={`---
import { ScrollEffect } from 'astro-animations';
---

<ScrollEffect type="parallax" speed={0.5}>
  <div>Parallax content</div>
</ScrollEffect>

<ScrollEffect type="fade">
  <div>Fades in with pure CSS</div>
</ScrollEffect>`} lang="astro" />

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Prop</th>
              <th>Type</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td>
                <code>parallax</code> | <code>fade</code> |
                <code>scale</code> | <code>rotate</code> |
                <code>blur</code> | <code>horizontal</code>
              </td>
              <td>required</td>
            </tr>
            <tr>
              <td><code>as</code></td>
              <td>HTML tag name</td>
              <td><code>div</code></td>
            </tr>
            <tr>
              <td><code>speed</code></td>
              <td>number</td>
              <td><code>0.5</code></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============ CSS Scroll Timeline ============ -->
    <section class="flow">
      <h2>CSS Scroll Timeline</h2>
      <p>
        All scroll-linked effects run entirely in CSS using
        <code>animation-timeline: view()</code> &mdash; zero JavaScript overhead.
      </p>
      <p>
        In browsers that don't support CSS Scroll Timeline, scroll effects
        gracefully degrade &mdash; elements simply remain static. No JS fallback
        is included to keep the system lightweight.
      </p>

      <h3>Browser Support</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Feature</th>
              <th>Chrome</th>
              <th>Firefox</th>
              <th>Safari</th>
              <th>Edge</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>IntersectionObserver</td>
              <td>51+</td>
              <td>55+</td>
              <td>12.1+</td>
              <td>15+</td>
            </tr>
            <tr>
              <td>CSS <code>@keyframes</code></td>
              <td>43+</td>
              <td>16+</td>
              <td>9+</td>
              <td>12+</td>
            </tr>
            <tr>
              <td>CSS custom properties</td>
              <td>49+</td>
              <td>31+</td>
              <td>9.1+</td>
              <td>15+</td>
            </tr>
            <tr>
              <td><code>animation-timeline: view()</code></td>
              <td>115+</td>
              <td>110+</td>
              <td>18+</td>
              <td>115+</td>
            </tr>
            <tr>
              <td>CSS <code>linear()</code> easing</td>
              <td>113+</td>
              <td>112+</td>
              <td>17.2+</td>
              <td>113+</td>
            </tr>
            <tr>
              <td>3D transforms (flip/fold)</td>
              <td>36+</td>
              <td>16+</td>
              <td>9+</td>
              <td>12+</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============ Accessibility ============ -->
    <section class="flow">
      <h2>Accessibility</h2>
      <ul>
        <li>
          <strong>Reduced motion</strong> &mdash; When
          <code>prefers-reduced-motion: reduce</code> is active, all animations are
          disabled and elements are forced visible (both in CSS and JS).
        </li>
        <li>
          <strong>Progressive enhancement</strong> &mdash; Elements are visible by
          default. JavaScript applies the initial hidden state via the
          <code>data-animate-ready</code> guard on <code>&lt;body&gt;</code>, so
          content is always accessible without JS.
        </li>
      </ul>
    </section>
  </main>
</Layout>

