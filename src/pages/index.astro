---
// pages/index.astro — PandaMotion Demo

import { Image } from 'astro:assets';
import panda from '@images/panda-01.jpg';
import Layout from '@layouts/BaseLayout.astro';
import { Animate, ScrollEffect } from 'astro-animations';
import '@styles/components/_demo-card.css';

const meta = {
  title: 'PandaMotion: An Animation Library for Astro',
  description:
    'An Astro intergration: Lightweight, modern CSS with intersection observer',
  imageOG: 'generic-social-1200x630.png',
  altOG: 'PandaMotion',
};

const pandaFacts: string[] = [
  'Pandas spend up to 14 hours a day eating bamboo to meet their energy needs.',
  'An adult giant panda can eat 9–18 kilograms of bamboo every day.',
  "Despite being classified as carnivores, over 99% of a panda's diet is plant-based.",
  'Pandas have a special "pseudo-thumb," an extended wrist bone that helps them grip bamboo stalks.',
  'Newborn panda cubs weigh only about 85–140 grams, roughly the size of a small bar of soap.',
  'Panda cubs are born pink, hairless, and blind, developing their iconic black-and-white fur weeks later.',
  "Each panda's black-and-white facial markings are unique, similar to human fingerprints.",
  'Giant pandas are excellent climbers and can also swim well.',
  'Pandas communicate through bleats, honks, scent markings, and body language rather than roaring.',
  'The giant panda is a global conservation symbol and the official logo of the World Wildlife Fund (WWF).',
];
---

<Layout metaData={meta}>
  <main class="wrapper flow">
    <!-- ============ Hero ============ -->
    <div class="title">
      <h1
        data-animate="slide"
        data-animate-direction="right"
        data-animate-easing="spring-5"
      >
        Panda
      </h1>
      <h2
        data-animate="slide"
        data-animate-direction="left"
        data-animate-delay="400"
        data-animate-duration="2000"
        data-animate-easing="spring-5"
      >
        Motion
      </h2>
    </div>
    <p
      data-animate="slide"
      data-animate-direction="up"
      data-animate-delay="200"
    >
      A lightweight animation system using CSS <i>@keyframes</i>,
      <i>IntersectionObserver</i>, and
      <i>animation-timeline: view()</i>. Zero dependencies, &lt; 7kB compressed.
    </p>
    <section class="flow">
      <h2>Staggered, Staggering Facts About Pandas!</h2>
      <ul
        id="pandaFacts"
        data-animate-stagger="500"
        data-animate-stagger-from="first"
      >
        {
          pandaFacts.map((fact, i) => (
            <li
              data-animate="slide"
              data-animate-direction={i % 2 === 0 ? "left" : "right"}
              data-animate-duration={900}
              data-animate-intensity={0.5}
            >
              {fact}
            </li>
          ))
        }
      </ul>
    </section>

    <!-- ============ 1. Animation Types ============ -->
    <section class="flow">
      <h2 data-animate="fade">The 7 Animation Types</h2>

      <div class="grid" data-layout="thirds" data-animate-stagger="100">
        <div class="demo-card" data-animate="fade">
          <h3>Fade</h3>
          <p>Simple opacity transition</p>
        </div>
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>Slide Up</h3>
          <p>Translates in from below</p>
        </div>
        <div class="demo-card" data-animate="bounce">
          <h3>Bounce</h3>
          <p>Bouncy entrance from below</p>
        </div>
      </div>

      <div class="grid" data-layout="thirds" data-animate-stagger="100">
        <div class="demo-card" data-animate="zoom">
          <h3>Zoom</h3>
          <p>Scales up into place</p>
        </div>
        <div class="demo-card" data-animate="flip" data-animate-direction="up">
          <h3>Flip</h3>
          <p>3D rotation on the X axis</p>
        </div>
        <div
          class="demo-card"
          data-animate="fold"
          data-animate-direction="left"
        >
          <h3>Fold</h3>
          <p>Unfolds from an edge</p>
        </div>
      </div>

      <div class="demo-card" data-animate="roll">
        <h3>Roll</h3>
        <p>Combined translate + rotate</p>
      </div>
    </section>

    <!-- ============ 2. Slide Directions ============ -->
    <section class="flow">
      <h2 data-animate="fade">Slide Directions</h2>

      <div class="grid" data-layout="50-50">
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-direction="left"
        >
          <h3>Slide Left</h3>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-direction="right"
        >
          <h3>Slide Right</h3>
        </div>
      </div>
      <div class="grid" data-layout="50-50">
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>Slide Up</h3>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-direction="down"
        >
          <h3>Slide Down</h3>
        </div>
      </div>
    </section>

    <!-- ============ 3. Intensity Levels ============ -->
    <section class="flow">
      <h2 data-animate="fade">Intensity Levels</h2>

      <div class="grid" data-layout="thirds" data-animate-stagger="100">
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-intensity="subtle"
        >
          <h3>Subtle</h3>
          <p>5vh translate</p>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-intensity="normal"
        >
          <h3>Normal</h3>
          <p>15vh translate</p>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-intensity="strong"
        >
          <h3>Strong</h3>
          <p>30vh translate</p>
        </div>
      </div>
    </section>

    <!-- ============ 4. Easing Functions ============ -->
    <section class="flow">
      <h2 data-animate="fade">Easing Functions</h2>
      <p data-animate="fade">
        36 easings from <a href="https://open-props.style/#easing">Open Props</a
        >
        — cubic-bezier, spring, bounce, and elastic curves.
      </p>

      <div class="grid" data-layout="thirds" data-animate-stagger="100">
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-easing="ease-out-3"
        >
          <h3>ease-out-3</h3>
          <p>Default — smooth deceleration</p>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-easing="spring-3"
        >
          <h3>spring-3</h3>
          <p>Open Props linear() spring</p>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-easing="spring"
        >
          <h3>spring</h3>
          <p>Alias for spring-3</p>
        </div>
      </div>

      <div class="grid" data-layout="thirds" data-animate-stagger="100">
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-easing="bounce-3"
        >
          <h3>bounce-3</h3>
          <p>Open Props bounce curve</p>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-easing="elastic-out-3"
        >
          <h3>elastic-out-3</h3>
          <p>Overshooting elastic</p>
        </div>
        <div
          class="demo-card"
          data-animate="slide"
          data-animate-easing="ease-in-out-5"
        >
          <h3>ease-in-out-5</h3>
          <p>Dramatic in-out</p>
        </div>
      </div>
    </section>

    <!-- ============ 5. Stagger ============ -->
    <section class="flow">
      <h2 data-animate="fade">Staggered Animations</h2>
      <p data-animate="fade">
        Parent sets the stagger interval; children animate sequentially.
      </p>

      <div
        class="grid"
        data-layout="thirds"
        data-animate-stagger="150"
        data-animate-stagger-from="first"
      >
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>1</h3>
        </div>
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>2</h3>
        </div>
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>3</h3>
        </div>
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>4</h3>
        </div>
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>5</h3>
        </div>
        <div class="demo-card" data-animate="slide" data-animate-direction="up">
          <h3>6</h3>
        </div>
      </div>
    </section>

    <!-- ============ 6. Component API ============ -->
    <section class="flow">
      <h2 data-animate="fade">&lt;Animate&gt; Component</h2>
      <p data-animate="fade">
        Declarative alternative to data attributes — same result, nicer DX.
      </p>

      <Animate type="slide" direction="left" easing="spring" duration={800}>
        <div class="demo-card">
          <h3>Slide left, spring easing, 800ms</h3>
          <p>Using &lt;Animate&gt; wrapper</p>
        </div>
      </Animate>

      <Animate type="zoom" intensity="strong" as="article" class="demo-card">
        <h3>Zoom (strong), rendered as &lt;article&gt;</h3>
        <p>Custom tag via the <code>as</code> prop</p>
      </Animate>
    </section>

    <!-- ============ 7. Repeat ============ -->
    <section class="flow">
      <h2 data-animate="fade">Repeat: Every Scroll</h2>
      <p data-animate="fade">
        Re-animates every time the element enters the viewport. Scroll past and
        back to see.
      </p>

      <div
        class="demo-card"
        data-animate="slide"
        data-animate-direction="up"
        data-animate-repeat="every"
      >
        <h3>I re-animate every time!</h3>
      </div>
    </section>

    <!-- ============ 8. CSS Scroll Timeline ============ -->
    <section class="flow">
      <h2 data-animate="fade">CSS Scroll Timeline (Zero JS)</h2>
      <p data-animate="fade">
        Native <code>animation-timeline: view()</code> &mdash; no JavaScript involved.
      </p>

      <ScrollEffect type="parallax" speed={0.5}>
        <div class="demo-card">
          <h3>CSS Parallax</h3>
          <p>Pure CSS, zero JS overhead</p>
        </div>
      </ScrollEffect>

      <ScrollEffect type="fade">
        <div class="demo-card">
          <h3>CSS Fade on Scroll</h3>
        </div>
      </ScrollEffect>

      <ScrollEffect type="scale">
        <div class="demo-card">
          <h3>CSS Scale on Scroll</h3>
        </div>
      </ScrollEffect>

      <ScrollEffect type="blur">
        <div class="demo-card">
          <h3>CSS Blur on Scroll</h3>
        </div>
      </ScrollEffect>

      <ScrollEffect type="horizontal" speed={0.4}>
        <div class="demo-card">
          <h3>CSS Horizontal</h3>
          <p>Slides horizontally with scroll</p>
        </div>
      </ScrollEffect>
    </section>

    <!-- ============ 9. Image Animations ============ -->
    <section class="flow">
      <h2 data-animate="fade">Image Animations</h2>

      <div class="grid" data-layout="thirds" data-animate-stagger="150">
        <div data-animate="zoom">
          <Image src={panda} alt="Panda" quality={50} />
        </div>
        <div data-animate="slide" data-animate-direction="up">
          <Image src={panda} alt="Panda" quality={50} />
        </div>
        <div data-animate="flip" data-animate-direction="right">
          <Image src={panda} alt="Panda" quality={50} />
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  .title > * {
    display: inline-block;
    font-size: calc(var(--step-6) * 2);
    font-weight: var(--font-weight-9);
  }

  .title h1 {
    color: var(--red-8);
  }

  .title h2 {
    color: var(--yellow-8);
  }

  #pandaFacts {
    list-style-type: none;
    padding: 0;
  }

  #pandaFacts li {
    max-width: 40ch;
    background: var(--yellow-3);
    margin: var(--space-s);
    padding: var(--space-m);
    text-align: center;
  }

  #pandaFacts li:nth-child(5n + 1) {
    border-radius: var(--radius-blob-1);
  }

  #pandaFacts li:nth-child(5n + 2) {
    border-radius: var(--radius-blob-2);
  }

  #pandaFacts li:nth-child(5n + 3) {
    border-radius: var(--radius-blob-3);
  }

  #pandaFacts li:nth-child(5n + 4) {
    border-radius: var(--radius-blob-4);
  }

  #pandaFacts li:nth-child(5n + 5) {
    border-radius: var(--radius-blob-5);
  }
</style>
